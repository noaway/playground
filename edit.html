<!doctype html>
<html>

<head>
	<title>The Go Playground</title>
	<link rel="stylesheet" href="/static/style.css">
	{{if .Analytics}}
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-11222381-7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());
		gtag('config', 'UA-11222381-7');
		gtag('config', 'UA-49880327-6');
	</script>
	{{end}}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="/static/jquery-linedtextarea.js"></script>
	<script src="/playground.js"></script>
	<script src="/static/playground-embed.js"></script>
	<script>
		$(document).ready(function () {
			playground({
				'codeEl': '#code',
				'outputEl': '#output',
				'runEl': '#run, #embedRun',
				'fmtEl': '#fmt',
				'fmtImportEl': '#imports',
				{{ if $.Share }}
				'shareEl': '#share',
			'shareURLEl': '#shareURL',
			{{ end }}
			'enableHistory': true,
			'enableShortcuts': true,
			'enableVet': true
			});
		playgroundEmbed({
			'codeEl': '#code',
				{{ if $.Share }}
			'shareEl': '#share',
			{{ end }}
			'embedEl': '#embed',
			'embedLabelEl': '#embedLabel',
			'embedHTMLEl': '#shareURL'
			});
		$('#code').linedtextarea();
		// Avoid line wrapping.
		$('#code').attr('wrap', 'off');
		var about = $('#about');
		about.click(function (e) {
			if ($(e.target).is('a')) {
				return;
			}
			about.hide();
		});

		// Preserve "Imports" checkbox value between sessions.
		if (readCookie('playgroundImports') == 'true') {
			$('#imports').attr('checked', 'checked');
		}
		$('#imports').change(function () {
			createCookie('playgroundImports', $(this).is(':checked') ? 'true' : '');
		});
		{ { if .Analytics} }
		// Fire Google Analytics events for Run/Share button clicks.
		$('#run').click(function () {
			gtag('event', 'click', {
				event_category: 'playground',
				event_label: 'run-button',
			});
		});
		$('#share').click(function () {
			gtag('event', 'click', {
				event_category: 'playground',
				event_label: 'share-button',
			});
		});
		{ { end } }
		});

		function createCookie(name, value) {
			document.cookie = name + "=" + value + "; path=/";
		}

		function readCookie(name) {
			var nameEQ = name + "=";
			var ca = document.cookie.split(';');
			for (var i = 0; i < ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') c = c.substring(1, c.length);
				if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
			}
			return null;
		}
	</script>
</head>

<body itemscope itemtype="http://schema.org/CreativeWork">
	<input type="button" value="Run" id="embedRun">
	<div id="banner">
		<div id="head" itemprop="name">The Go Playground</div>
		<div id="controls">
			<input type="button" value="Run" id="run">
			<input type="button" value="Format" id="fmt">
			<div id="importsBox">
				<label title="Rewrite imports on Format">
					<input type="checkbox" id="imports">
					Imports
				</label>
			</div>
			{{if $.Share}}
			<input type="button" value="Share" id="share">
			<input type="text" id="shareURL">
			<label id="embedLabel">
				<input type="checkbox" id="embed">
				embed
			</label>
			{{end}}
		</div>
	</div>
	<div id="wrap">
		<textarea itemprop="description" id="code" name="code" autocorrect="off" autocomplete="off" autocapitalize="off"
		 spellcheck="false">{{printf "%s" .Snippet.Body}}</textarea>
	</div>
	<div id="output"></div>
</body>

</html>